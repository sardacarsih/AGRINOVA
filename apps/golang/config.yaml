# ============================================================================
# AGRINOVA GRAPHQL SERVER - YAML CONFIGURATION EXAMPLE
# ============================================================================
# This is an example YAML configuration file for the Agrinova GraphQL server.
# You can use this instead of or in combination with environment variables.
# Environment variables take precedence over YAML configuration.
# ============================================================================

# Server Configuration
server:
  port: 8080
  host: "0.0.0.0"
  gin_mode: "debug" # "debug", "release", "test"
  graphql_endpoint: "/graphql"
  read_timeout: "30s"
  write_timeout: "30s"
  idle_timeout: "120s"

# Database Configuration
database:
  host: "localhost"
  port: 5432
  user: "agrinova"
  password: "itBOSS"
  name: "agrinova_go"
  ssl_mode: "disable"
  # Alternative: url: "postgresql://user:password@localhost:5432/agrinova_go?sslmode=disable"

# Authentication Configuration
auth:
  jwt_issuer: "agrinova-api"
  access_token_duration: "15m"
  refresh_token_duration: "168h" # 7 days
  offline_token_duration: "720h" # 30 days
  web_session_duration: "24h"

  # Cookie Configuration
  cookie_domain: "localhost"
  secure_cookies: false
  same_site_strict: false

  # Device Management
  max_devices_per_user: 5
  require_manual_auth: false

# CORS Configuration
cors:
  allowed_origins:
    - "http://localhost:3000"
    - "http://localhost:8080"
  allowed_methods:
    - "GET"
    - "POST"
    - "PUT"
    - "DELETE"
    - "OPTIONS"
  allowed_headers:
    - "Origin"
    - "Content-Type"
    - "Accept"
    - "Authorization"
    - "X-CSRF-Token"
  max_age: 86400

# Security Configuration
security:
  rate_limit_enabled: true
  rate_limit_requests_per_minute: 100
  rate_limit_burst: 10
  csrf_enabled: true
  device_binding_enabled: true
  min_secret_length: 32

# Logging Configuration
logging:
  level: "info" # "debug", "info", "warn", "error"
  format: "json" # "json", "text"

# WebSocket Configuration
websocket:
  enabled: true
  keepalive_interval: "10s"
  read_timeout: "60s"
  write_timeout: "60s"
  max_connections: 2000

# GraphQL Configuration
graphql:
  playground_enabled: true
  introspection_enabled: true
  max_query_depth: 10
  max_query_fields: 100
  max_query_cost: 1000
  slow_query_threshold: "5s"
